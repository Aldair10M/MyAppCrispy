<ion-header>
  <ion-toolbar>
    <img src="assets/img/logo-crispy.png" alt="Logo" />
    <h1>Zona Chef</h1>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <h2>Introducción</h2>

  <div>
    <ion-button expand="block" (click)="showPending()">Ordenes por Atender</ion-button>
    <ion-button expand="block" (click)="showReady()">Ordenes Atendidas</ion-button>
  </div>

  <div>
    <div *ngIf="mode==='pending'">
      <h3>Ordenes por Atender</h3>
      <div *ngIf="loading">Cargando órdenes...</div>
      <div *ngIf="!loading && pendingOrders.length===0">No hay órdenes pendientes.</div>
      <div *ngFor="let o of pendingOrders">
        <ion-card>
          <ion-card-header>
            <ion-card-title>Orden</ion-card-title>
            <div>{{ o.id }}</div>
          </ion-card-header>
          <ion-card-content>
            <div><strong>Usuario:</strong> {{ o._displayName }}</div>
            <div><strong>Fecha:</strong> {{ o.createdAt ? (o.createdAt | date:'short') : '' }}</div>
            <div><strong>Items:</strong></div>
            <ul>
              <li *ngFor="let it of o.items">{{ it.name }} x{{ it.qty }} - S/{{ it.price }}</li>
            </ul>
            <div>S/{{ o.total ?? o.subtotal }}</div>
            <div>
              <ion-button (click)="attendOrder(o)">Atender Orden</ion-button>
            </div>
          </ion-card-content>
        </ion-card>
      </div>
    </div>

    <div *ngIf="mode==='ready'">
      <h3>Ordenes Atendidas</h3>
      <div *ngIf="loading">Cargando órdenes...</div>
      <div *ngIf="!loading && readyOrders.length===0">No hay órdenes atendidas.</div>
      <div *ngFor="let o of readyOrders">
        <ion-card>
          <ion-card-header>
            <ion-card-title>Orden {{ o.id }} - S/{{ o.total ?? o.subtotal }}</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <div><strong>Usuario:</strong> {{ o.userId || o.email || 'Anónimo' }}</div>
            <div><strong>Fecha:</strong> {{ o.createdAt ? (o.createdAt | date:'short') : '' }}</div>
            <div><strong>Items:</strong></div>
            <ul>
              <li *ngFor="let it of o.items">{{ it.name }} x{{ it.qty }} - S/{{ it.price }}</li>
            </ul>
          </ion-card-content>
        </ion-card>
      </div>
    </div>
  </div>

  <div>
    <ion-button (click)="logout()">Cerrar sesión</ion-button>
  </div>
</ion-content>
